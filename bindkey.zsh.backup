apps () {
	pushd ~/codebase/
  nvim $(fd -tf --full-path ~/codebase/ | flist 'Codebase')
}

aws_jump () {
	pushd ~/Portfolio/aws/
  nvim $(fd -tf  | flist 'n0ko AWS Terraform')
}


leader_rag() { #rag        [1/4]
    zellij run --floating --close-on-exit -- rag.lua
}

leader_wall() { #wallpaper
    zellij run --floating --close-on-exit -- ~/scripts/wall.zsh
}

leader_nvim_update() { #wallpaper
    zellij run --floating --close-on-exit -- ~/scripts/nvim_update.py
}

# DATADOG
ddog-conf-edit () {
	pushd ~/Portfolio/ddog_configs/conf.d/
  sudo nvim $(fd -tf -e yaml -e yml -e example| flist_noprev 'Datadog Configurations')
}

ddog-core-conf-edit () {
	pushd /home/n0ko/Programs/integrations-core/
  sudo nvim $(fd -tf -e yaml -e yml -e example | flist_noprev 'Datadog Core Configurations')
}

datadog_stat() {
  dstat
}

datadog_stat_verbose() {
  dstat -v
}

datadog_agent_restart() {
  echo "Restarting Datadog agent"
  sudo systemctl restart datadog-agent
  if [ $? -eq 0 ]; then
    echo "Agent Restart Successful"
  else
    echo "Agent Restart Failed"
  fi
}

#PROGRAMMING KEYS
leader_program () {
	pushd ~/Programs
	cd $(fd -td -d1 | flist )


	CURSOR=$#BUFFER
	zle accept-line 2> /dev/null
}

codebase2 () {
	pushd /home/n0ko/codebase2/
	nvim $(fd -tf | flist 'codebase2')
}

codebase () {
	pushd /home/n0ko/codebase/
	nvim $(fd -tf | flist 'codebase')
}

luap () {
	pushd /home/n0ko/programming/lua_projects/
	nvim $(fd -e lua | flist 'Lua Programs')
}

pyap () {
	pushd /home/n0ko/programming/python_projects/
	nvim $(fd -e py | flist 'Python Programs')
}

goap () {
	pushd /home/n0ko/programming/go_projects/
	nvim $(fd -e go | flist 'Go Programs')
}

ddog_server () {
	pushd /home/n0ko/Portfolio/mkii_ddog_server/
	nvim $(fd -e go | flist "n0ko's Datadog Server")
}

dogap () {
	pushd /home/n0ko/Portfolio/ddog_webhooks_terraform/downtimes/ddog-services-backend/go_downtimes/
	nvim $(fd -e go | flist 'Datadog Program')
}

rusty () {
	pushd ~/programming/rust_projects/
	nvim $(fd -e rs | flist "Rust Programs")
}

spell () {
  pushd ~/scripts/
	nvim $(fd -tf | flist "Spells")
}

stats () {
  pushd ~/stats/
	nvim $(fd -tf | flist "Statistics")
}

#CONFIG_KEYS
config () {
	pushd ~/.config
	nvim $(fd -tf -H | flist 'Configurations')
}

exconf () {
	nvim ~/.zsh/exports/$(cd ~/.zsh/exports && fd -tf | flist 'Export Coneigurations')
}

plug () {
	pushd ~/.local/share/nvim/lazy/ && c $(fd -td -d1 |flist 'Neovim Plugins')
}

vconf () {
	pushd ~/.config/nvim
	nvim $(fd -e lua | flist 'Neovim Configurations')
}

zconf () {
	nvim ~/.zsh/tooling/$(cd ~/.zsh/tooling && fd -tf |\
        flist )
}

forest_scripts () {
	nvim ~/forest/scripts/$(cd ~/forest/scripts/ && fd -tf |\
        flist 'Forest Scripts')
}

echo_scripts () {
	nvim ~/forest/scripts/$(cd ~/forest/scripts/ && fd -tf |\
        flist 'Ecco Scripts')
}

leader_gup () {
  zellij run --floating -- gitup.lua ~/Programs/
}

#SSH KEYS
m1_ssh() {
    zellij run --floating --close-on-exit -- ssh n0ko@m1
}

command_ssh() {
    zellij run --floating --close-on-exit -- ssh n0ko@command
}

# COMMANDS
run_btop() {
    zellij run --floating --close-on-exit -- btop
}

function leader_programming() {
    local key
    read -sk 1 key
    case $key in
        (a) aws_jump ;;
        (p) pyap ;;
        (g) goap ;;
        (l) luap ;;
        (d) dogap ;;
        (r) rusty ;;
        (s) spell ;;
        (t) stats ;;
        (f) forest_scripts ;;
    esac
}

function leader_ssh() {
    local key
    read -sk 1 key
    case $key in
        (m) m1_ssh ;;
        (c) command_ssh ;;
        (s) leader_steam_games ;;
    esac
}

function datadog_agent_stat() {
    local key
    read -sk 1 key
    case $key in
        (s) datadog_stat ;;
        (v) datadog_stat_verbose ;;
    esac
}

function leader_datadog() {
    local key
    read -sk 1 key
    case $key in
        (d) ddog_server ;;
        (s) datadog_agent_stat ;;
        (c) ddog-conf-edit ;;
        (o) ddog-core-conf-edit ;;
        (r) datadog_agent_restart ;;
    esac
}

function leader_zellij() {
    local key
    read -sk 1 key
    case $key in
        (a) za ;;
    esac
}

function leader_config() {
    local key
    read -sk 1 key
    case $key in
        (a) codebase ;;
        (c) config ;;
        (p) plug ;;
        (s) codebase2 ;;
        (v) vconf ;;
        (t) run_btop ;;
        (x) exconf ;;
        (z) zconf ;;
    esac
}

function leader_ai() {
    local key
    read -sk 1 key
    case $key in
        (d) claude_delete_session ;;
        (f) ai_floater ;;
        (s) claude_sessions ;;
    esac
}

function man_floater() {
    local selection=$(find /usr/share/man -type f -name '*.gz' 2>/dev/null | \
        sed 's|.*/man\([0-9a-z]*\)/\(.*\)\.\([0-9a-z]*\)\.gz|\2 (\1)|' | \
        sort -u | \
        gum filter --placeholder "Search man pages...")
    if [[ -n "$selection" ]]; then
        local name=$(echo "$selection" | awk '{print $1}')
        local section=$(echo "$selection" | sed 's/.*(\([^)]*\)).*/\1/')
        man "$section" "$name" | nvim -R "+set ft=man" -
    fi
}

function leader_man() {
    zellij run --floating --close-on-exit -- zsh -c 'source ~/.zsh/tooling/bindkey.zsh && man_floater'
}

function leader_key() {
    local key
    read -sk 1 key
    case $key in
        (a) leader_ai ;;
        (c) leader_config ;;
        (d) leader_datadog ;;
        (g) leader_gup ;;
        (m) leader_man ;;
        (n) leader_nvim_update ;;
        (o) leader_program ;;
        (p) leader_programming ;;
        (r) leader_rag ;;
        (s) leader_ssh ;;
        (w) leader_wall ;;
        (z) leader_zellij ;;
    esac
}

zle -N leader_key

bindkey '^@' leader_key

# STEAM LAUNCHER
leader_steam_games() {
    zellij run --floating --close-on-exit -- ~/scripts/steam_launcher.zsh
}

